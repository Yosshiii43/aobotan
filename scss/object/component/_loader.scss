/******************************
Loader
******************************/
@use "../../foundation/forwards" as *;

.c-loader {
  position: fixed;
  inset: 0;
  z-index: $z-loader;
  display: grid;
  place-items: center;
  width: 100%;
  height: 100vh;           // iOS 誤差が気になるなら下に min-height 追加
  min-height: 100dvh;      // 対応ブラウザでアドレスバー除外
  background-color: $color-lightgray;
  overflow: hidden;
  /* 退場用トランジション（JSで .is-hidden を付与） */
  transition: opacity .6s ease;
  &.is-hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
  }
}

.c-loader__inner {
  position: relative;
  width: 80px;
  aspect-ratio: 80 / 95;      // = 16:19
  display: block;

  img {
    width: 100%;
    height: auto;
    display: block;
  }

  /* マスクアニメ */
  &::before {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(0);
    background: $color-lightgray;
    animation: loader-mask 1.2s ease forwards;
  }
}

/* 退場アニメ（フェード + 少し上方向へ）: JS で遅延実行してもよい */
.c-loader__inner.is-out {
  animation: loader-out .6s ease forwards;
}

/* Keyframes */
@keyframes loader-mask {
  0%   { transform: translateX(0); }
  70%  { transform: translateX(0); }
  100% { transform: translateX(100%); }
}

@keyframes loader-out {
  0%   { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-16px); }
}

/* Motion reduction */
@media (prefers-reduced-motion: reduce) {
  .c-loader__inner::before,
  .c-loader__inner,
  .c-loader {
    animation: none !important;
    transition: none !important;
  }
}